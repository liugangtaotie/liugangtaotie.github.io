(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{584:function(s,a,n){"use strict";n.r(a);var e=n(2),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("自动化打包的工具有很多，比较流行的有Jenkins和fastlane；")]),s._v(" "),a("p",[s._v("Jenkins 需要配置的东西非常多，还需要仓库地址等等很多信息，比较麻烦；")]),s._v(" "),a("p",[s._v("fastlane是比较简单快速的，（ios，Android都支持）；")]),s._v(" "),a("p",[s._v("github地址：https://github.com/fastlane/fastlane\n文档地址：https://docs.fastlane.tools/\ngithub上有 24014多星星。3659个fork，所以大量的开发者信任并一起维护他。")]),s._v(" "),a("p",[s._v("1、首先确认是否安装了ruby，\n$ ruby -v #查看下ruby版本")]),s._v(" "),a("p",[s._v("2、确认是否安装了Xcode命令行工具\n$ xcode-select --install")]),s._v(" "),a("p",[s._v("3、开始安装fastlane")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# Using RubyGems\nsudo gem install fastlane -NV\n或者\n# Alternatively using Homebrew\nbrew cask install fastlane\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("4、使用")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cd + 项目目录\n$ fastlane init #执行成功后选择手动\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("配置 项目下fastlane 有两个文件Appfile和Fastfile")]),s._v(" "),a("p",[s._v("Appfile 文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# app_identifier("[[APP_IDENTIFIER]]") # The bundle identifier of your app\n# apple_id("[[APPLE_ID]]") # Your Apple email address\n\n# For more information about the Appfile, see:\n#     https://docs.fastlane.tools/advanced/#appfile\n\n其中： app_identifier用于指定APP的bundle id，apple_id指的是你的AppleID\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("Fastfile 文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# This file contains the fastlane.tools configuration\n# You can find the documentation at https://docs.fastlane.tools\n#\n# For a list of all available actions, check out\n#\n#     https://docs.fastlane.tools/actions\n#\n# For a list of all available plugins, check out\n#\n#     https://docs.fastlane.tools/plugins/available-plugins\n#\n\n# Uncomment the line if you want fastlane to automatically update itself\n# update_fastlane\n\ndefault_platform(:ios)\n\nplatform :ios do\n  desc "Description of what the lane does"\n  lane :custom_lane do\n    # add actions here: https://docs.fastlane.tools/actions\n  end\nend\n\n说明：\nlane :custom_lane do中的custom_lane是函数的名称，打包执行命令的时候使用。\n# add actions here: https://docs.fastlane.tools/actions 这块就是让我们加具体执行的插件、命令等操作用于打包。\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("p",[s._v("简单打包用于测试，可打包成ad-hoc 或者development\n并上传到蒲公英或者fir\n1、上传蒲公英\n1)、cd到项目下， 安装pgyer插件 执行命令fastlane add_plugin pgyer\n2、上传至fir\n1)、cd到项目下, 安装fir插件，执行命令fastlane add_plugin firim")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# This file contains the fastlane.tools configuration\n# You can find the documentation at https://docs.fastlane.tools\n#\n# For a list of all available actions, check out\n#\n#     https://docs.fastlane.tools/actions\n#\n# For a list of all available plugins, check out\n#\n#     https://docs.fastlane.tools/plugins/available-plugins\n#\n\n# Uncomment the line if you want fastlane to automatically update itself\n# update_fastlane\n# fastlane NHDMedicalZk\n\ndefault_platform(:ios)\n\nplatform :ios do\n  desc "上传新版本到 fir"\n  lane :hlwdoczk do  #函数名称，执行打包的时候使用\n\n    increment_build_number\n    time = Time.new.strftime("%Y%m%d") #获取时间格式\n    version = get_version_number#获取版本号\n    api_key = "129c77ec636596110b0730f587228f8d"\n    user_key = "f898bc3d67274e8c7efdd4670c8a437e"\n    firim_api_token = "d69fa35f34b75f3a08312cafe712bc51"\n    ipaName = "Release_#{version}_#{time}.ipa"\n    gym(\n       scheme:"NHDMedicalZk", #项目target名称\n       export_method:"ad-hoc",#打包的类型\n       configuration:"Release",#模式，默认Release，还有Debug\n       clean:true, #在构建前先clean\n       output_name:"#{ipaName}",#输出的包名\n       output_directory:"./build"#输出的位置\n     )\n     #上传 蒲公英\n     #pgyer(api_key:"#{api_key}", user_key:"#{user_key}")\n     #上传 fir\n     firim(firim_api_token:"#{firim_api_token}")\n  end\nend\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br")])]),a("p",[s._v("实际实践例子")]),s._v(" "),a("p",[s._v("1.选择某个项目\n"),a("img",{attrs:{src:"https://gitee.com/yuechangfeng/blog-source/raw/master/_posts/files/fastlane/fastlane1.png",alt:"选择某个项目"}})]),s._v(" "),a("p",[s._v("2.选择项目的target\n"),a("img",{attrs:{src:"https://gitee.com/yuechangfeng/blog-source/raw/master/_posts/files/fastlane/fastlane2.png",alt:"选择某个项目"}})]),s._v(" "),a("p",[s._v("3.上传app包的具体配置信息\n"),a("img",{attrs:{src:"https://gitee.com/yuechangfeng/blog-source/raw/master/_posts/files/fastlane/fastlane3.png",alt:"APPinfo"}})]),s._v(" "),a("p",[s._v("4.app归档结果以及上传的托管平台结果\n"),a("img",{attrs:{src:"https://gitee.com/yuechangfeng/blog-source/raw/master/_posts/files/fastlane/fastlane4.png",alt:"upload"}})]),s._v(" "),a("p",[s._v("参考资料：")]),s._v(" "),a("p",[s._v("1.https://www.jianshu.com/p/6ab8d2b7253a")]),s._v(" "),a("p",[s._v("2.https://www.jianshu.com/p/5119c115ec90")]),s._v(" "),a("p",[s._v("3.https://www.jianshu.com/p/77e7fc2cb3c2")])])}),[],!1,null,null,null);a.default=t.exports}}]);