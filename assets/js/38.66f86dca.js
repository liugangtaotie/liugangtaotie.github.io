(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{721:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("ul",[a("li",[a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")])])]),s._v(" "),a("p",[s._v("docking-document是微前端对接文档。")]),s._v(" "),a("p",[s._v("此文档面向网页开发者介绍docking-document如何使用及相关注意事项。")]),s._v(" "),a("ul",[a("li",[a("h2",{attrs:{id:"基础接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础接口"}},[s._v("#")]),s._v(" 基础接口")])])]),s._v(" "),a("h2",{attrs:{id:"范式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#范式"}},[s._v("#")]),s._v(" 范式")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// accessToken:具体用户token")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// specialParam:具体模块需要参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// specialRouter:具体模块路由")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  accessToken"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" sessionStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  specialParam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" sparamstr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("decodeURIComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("href "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$cfg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("microServiceOnlineConsult "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("/#/resident/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("specialRouter"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("?sparamstr=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("sparamstr"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[s._v("#")]),s._v(" example")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// accessToken:具体用户token")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// specialParam:具体模块需要参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// specialRouter:具体模块路由")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" \n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  accessToken"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" sessionStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  consultId"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" businessId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  consultType"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" businessType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" sparamstr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("decodeURIComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("href "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$cfg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("microServiceOnlineConsult "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("/#/resident/consultDetail?sparamstr=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("sparamstr"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h1",{attrs:{id:"一、互联网诊疗微前端移动端-h5-mobile-接入文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、互联网诊疗微前端移动端-h5-mobile-接入文档"}},[s._v("#")]),s._v(" 一、互联网诊疗微前端移动端（H5-mobile）接入文档")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("修订日期")]),s._v(" "),a("th",[s._v("修订版本")]),s._v(" "),a("th",[s._v("修订人")]),s._v(" "),a("th",[s._v("修订内容")]),s._v(" "),a("th",[s._v("备注")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("2021-06-02")]),s._v(" "),a("td",[s._v("0.1")]),s._v(" "),a("td",[s._v("王兆贤")]),s._v(" "),a("td"),s._v(" "),a("td")])])]),s._v(" "),a("h2",{attrs:{id:"接入流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接入流程"}},[s._v("#")]),s._v(" 接入流程")]),s._v(" "),a("p",[s._v("互联网诊疗微前端 mobile部分分为居民端和医护端两部分，通过H5实现，为Android、iOS及微信公众号等提供相关业务对接。对接端仅需提供accessToken及source即可。")]),s._v(" "),a("h2",{attrs:{id:"第1步-确认需使用的功能模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第1步-确认需使用的功能模块"}},[s._v("#")]),s._v(" 第1步：确认需使用的功能模块")]),s._v(" "),a("p",[a("strong",[s._v("居民端相关功能模块路由如下：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("在线问诊：/resident/onlineConsult\n复诊配药：/resident/visitDispensing\n候诊间：  /resident/cloudWaitingVisit\n我的问诊：/resident/consultRecord\n药品订单：/resident/drugOrders\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("医护端相关功能模块如下：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("互联网诊疗：/doctor/onlineConsult\n排班设置：  /doctor/schedulingSet\n服务设置：  /doctor/serviceType\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"第2步-跳转url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第2步-跳转url"}},[s._v("#")]),s._v(" 第2步：跳转URL")]),s._v(" "),a("p",[s._v("将微前端发布到站点之后，Android和iOS通过webView，公众号通过iframe直接跳转到对应功能模块的URL（注意sparamstr参数的使用），直接跳转对应模块的URL即可使用对应的功能模块")]),s._v(" "),a("p",[s._v("URL格式如下：")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("baseUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("功能模块路由"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("sparamstr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"04fad557-933e-4563-abd0-ae65d88efabb"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("，"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//source  0:公众号  1.Android  2：iOS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//role：  调用者角色： 0:居民  1：医生")]),s._v("\n\n\nsample：\n公众号调用居民端在线问诊模块页面\nhttp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jkt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bsoft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hcn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("online"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("consult"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mobile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dist"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("resident"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("onlineConsult"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("sparamstr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxxxxxxxxxxxxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nAndroid App调用医护端排班设置模块\nhttp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jkt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bsoft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hcn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("online"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("consult"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mobile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dist"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("doctor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schedulingSet"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("sparamstr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxxxxxxxxxxxxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"第3步-与native交互"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第3步-与native交互"}},[s._v("#")]),s._v(" 第3步：与Native交互")]),s._v(" "),a("p",[s._v("在Android和ios使用互联网诊疗的模块时，有部分功能使用使用原生实现，如IM聊天、支付及图片选择等，Android和ios是通过JSBridge进行交互的。微前端提供的交互事件如下：")]),s._v(" "),a("p",[s._v("注：Android和ios在以下中统称为Native")]),s._v(" "),a("h3",{attrs:{id:"_1-图片选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-图片选择"}},[s._v("#")]),s._v(" 1.图片选择：")]),s._v(" "),a("p",[s._v("互联网诊疗的疾病描述等页面提供了上传图片的功能，选择图片时，微前端JS会发送callUploadImage事件")]),s._v(" "),a("p",[s._v("​\t（1）JS发送事件时会将以下参数以json形式发送给Native")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   maxCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("               可选择上传图片的最多的数量\n   selectedCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("          已选择上传的图片的数量\n   imgUrlArray"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("            已选择上传的图片的"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("URL")]),s._v("（数组）\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("​\t（2）Native根据maxCount和selectedCount参数判断剩余可选择的图片的数目")]),s._v(" "),a("p",[s._v("​\t（3）上传新增的图片，若上传接口调用结束后则将成功或失败的结果返回给JS，返回结果如下")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("上传成功返回："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("code："),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("，uploadedImgUrlArray"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("imgUrl1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("imgURL2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \nuploadedImgUrlArray是"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JS")]),s._v("传入的imgUrlArray和新增图片的Url的组合\n\n上传失败返回："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("code："),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("，msg：图片上传失败"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("针对JS方删除图片的操作，Native方不需要进行处理")]),s._v(" "),a("h3",{attrs:{id:"_2-支付"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-支付"}},[s._v("#")]),s._v(" 2.支付")]),s._v(" "),a("p",[s._v("互联网诊疗中涉及的支付是通过Native调用对应的SDK进行支付的，JS中调用支付时会将相关的事件发送给Native，Native调用SDK进行支付。")]),s._v(" "),a("p",[s._v("（1）consultPay")]),s._v(" "),a("p",[s._v("在线问诊支付时JS发送该事件，并将订单信息及选择的支付方式传给Native，Native通过订单信息调用对应的支付方式进行支付，Native支付完成并确认业务是否成功，若成功Native将回传参数{code：200}给JS，JS通过判断code跳转成功或失败页面。")]),s._v(" "),a("h3",{attrs:{id:"_3-im聊天"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-im聊天"}},[s._v("#")]),s._v(" 3.IM聊天")]),s._v(" "),a("p",[s._v("jumpToIMChartVC")]),s._v(" "),a("p",[s._v("居民端在线问诊预约且医生接诊后，居民可以从问诊记录进入IM聊天，JS将发送jumpToIMChartVC事件给Native，并将consultId传给Native，Native根据参数consultId查询聊天并进入聊天室。")]),s._v(" "),a("h1",{attrs:{id:"二、互联网诊疗微前端网页端-h5-web-接入文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、互联网诊疗微前端网页端-h5-web-接入文档"}},[s._v("#")]),s._v(" 二、互联网诊疗微前端网页端（H5-web）接入文档")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("修订日期")]),s._v(" "),a("th",[s._v("修订版本")]),s._v(" "),a("th",[s._v("修订人")]),s._v(" "),a("th",[s._v("修订内容")]),s._v(" "),a("th",[s._v("备注")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("2021-06-03")]),s._v(" "),a("td",[s._v("0.1")]),s._v(" "),a("td",[s._v("潘双双")]),s._v(" "),a("td"),s._v(" "),a("td")])])]),s._v(" "),a("h2",{attrs:{id:"接入流程-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接入流程-2"}},[s._v("#")]),s._v(" 接入流程")]),s._v(" "),a("p",[s._v("互联网诊疗微前端 web部分通过H5实现，为PC端提供相关业务对接。对接端仅需提供accessToken即可。")]),s._v(" "),a("h2",{attrs:{id:"第1步-确认需使用的功能模块-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第1步-确认需使用的功能模块-2"}},[s._v("#")]),s._v(" 第1步：确认需使用的功能模块")]),s._v(" "),a("h4",{attrs:{id:"相关功能模块路由如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关功能模块路由如下"}},[s._v("#")]),s._v(" 相关功能模块路由如下：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("云诊室：\n    排班设置：\t/cloudClinicManage/workforceManagement/workforceList\n    患者列表： /cloudClinicManage/patientList\n    历史记录： /cloudClinicManage/history\n    处方审核查询：/cloudClinicManage/reviewQuery\n协同门诊：\n    发起预约：/collaborativeClinic/start\n    预约列表：/collaborativeClinic/appointList\n    历史列表：/collaborativeClinic/historyList\n")])])]),a("h2",{attrs:{id:"第2步-跳转url-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第2步-跳转url-2"}},[s._v("#")]),s._v(" 第2步：跳转URL")]),s._v(" "),a("p",[s._v("将微前端发布到站点之后，pc端通过iframe直接跳转到对应功能模块的URL（注意sparamstr参数的使用），直接跳转对应模块的URL即可使用对应的功能模块")]),s._v(" "),a("p",[s._v("URL格式如下：")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("baseUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("功能模块路由"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("sparamstr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"04fad557-933e-4563-abd0-ae65d88efabb"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n\n\nsimple：跳转云诊室排班设置模块\nhttp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jkt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bsoft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("online"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("consult"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("web"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dist"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//cloudClinicManage/workforceManagement/workforceList?sparamstr={"accessToken":"xxxxxxxxxxxxxxxxx"}')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h1",{attrs:{id:"三、微服务-互联网诊疗-android对接文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、微服务-互联网诊疗-android对接文档"}},[s._v("#")]),s._v(" 三、微服务-互联网诊疗-Android对接文档")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("修订日期")]),s._v(" "),a("th",[s._v("修订版本")]),s._v(" "),a("th",[s._v("修订人")]),s._v(" "),a("th",[s._v("修订内容")]),s._v(" "),a("th",[s._v("备注")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("2021-06-09")]),s._v(" "),a("td",[s._v("0.1")]),s._v(" "),a("td",[s._v("花森秀")]),s._v(" "),a("td"),s._v(" "),a("td")])])]),s._v(" "),a("h3",{attrs:{id:"简单介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单介绍"}},[s._v("#")]),s._v(" 简单介绍")]),s._v(" "),a("p",[s._v("    微服务互联网诊功能是使用H5页面实现的，并供其他端嵌入使用；因此APP对接时，需要创建带有WebView类功能的页面；")]),s._v(" "),a("p",[s._v("    互联网诊疗存在支付和IM的聊天功能，APP对接时这些功能是原生自己实现的；因此这里需要微服务与原生存在交互。")]),s._v(" "),a("p",[s._v("    自定义的JsWebViewActivity类；已经具有基本的交互功能；我们可以继承JsWebViewActivity进行创建页面。项目中也有基于项目业务封装的并继承JsWebViewActivity的基类；建议使用该基类进行创建页面。")]),s._v(" "),a("h3",{attrs:{id:"_1-健康通居民端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-健康通居民端"}},[s._v("#")]),s._v(" 1.健康通居民端")]),s._v(" "),a("p",[s._v("JsWebViewActivity就是我们基于健康通业务封装的基类；建议使用JsWebViewActivity进行创建页面。")]),s._v(" "),a("h4",{attrs:{id:"_1-1微前端嵌入app的各个页面对接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1微前端嵌入app的各个页面对接"}},[s._v("#")]),s._v(" 1.1微前端嵌入APP的各个页面对接")]),s._v(" "),a("p",[a("strong",[s._v("微前端互联网诊疗各功能模块首页路由：")]),a("br"),s._v("\n首页: /resident/index?"),a("br"),s._v("\n在线问诊：/resident/onlineConsult"),a("br"),s._v("\n复诊配药：/resident/visitDispensing"),a("br"),s._v("\n候诊间：/resident/cloudWaitingVisit"),a("br"),s._v("\n云支付: /resident/cloudPayment"),a("br"),s._v("\n我的问诊：/resident/consultRecord"),a("br"),s._v("\n药品订单：/resident/drugOrders")]),s._v(" "),a("p",[a("strong",[s._v("使用方式：")]),a("br"),s._v('\nbaseUrl/#/{功能模块首页路由}? sparamstr={"accessToken":"", "source":""}'),a("br"),s._v(" "),a("strong",[s._v("入参说明：")]),a("br"),s._v("\naccessToken:登录的token"),a("br"),s._v("\nsource：来源")]),s._v(" "),a("p",[a("strong",[s._v("例子：")]),s._v(" "),a("code",[s._v('http://jkt.bsoft.com.cn/hc-online-consult-mobile-dist/#/resident/index?sparamstr={"accessToken":"04fad557-933e-4563-abd0-ae65d88efabb", "source":"2"}')])]),s._v(" "),a("h4",{attrs:{id:"_1-2-支付"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-支付"}},[s._v("#")]),s._v(" 1.2 支付")]),s._v(" "),a("p",[s._v("JS-Native 支付交互方法名：consultPay；")]),s._v(" "),a("p",[s._v("**使用说明：**在JsWebViewActivity中注册交互方法,将支付过程写在JsData中")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v(" webViewTools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("registerWebViewFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"consultPay"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JsCallBack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            @Override\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("notifyNativeMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n            @Override\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("JsData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("String data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//支付过程")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n            @Override\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("CallBack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CallBackFunction "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" throws JSONException "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//支付成功，返回数据给js端")]),s._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[a("strong",[s._v("支付具体说明：")]),a("br"),s._v("\ncom.bsoft.hcn.pub.webviewlib.ConsultPayWebviewActivity 中有详细的js调起原生支付的过程，js端通过JsData方法，将支付需要的参数传递给原生，原生调起支付方法，支付成功后获得数据，通过CallBack方法传给js端。")]),s._v(" "),a("h4",{attrs:{id:"_1-3-im聊天"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-im聊天"}},[s._v("#")]),s._v(" 1.3 IM聊天")]),s._v(" "),a("p",[s._v("JS-Native 进入IM聊天交互方法名：jumpToIMChartVC；")]),s._v(" "),a("p",[a("strong",[s._v("使用说明：")]),s._v(" 在JsWebViewActivity中注册交互方法")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v(" webViewTools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("registerWebViewFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jumpToIMChartVC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JsCallBack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            @Override\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("notifyNativeMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n            @Override\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("JsData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("String data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                Param bean "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alibaba"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fastjson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("JSONObject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("parseObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                GetConsultDetailDataTask task "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetConsultDetailDataTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("consultId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n            @Override\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("CallBack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("CallBackFunction "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"_2-健康通医生端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-健康通医生端"}},[s._v("#")]),s._v(" 2.健康通医生端")]),s._v(" "),a("h4",{attrs:{id:"_2-1微前端嵌入app的各个页面对接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1微前端嵌入app的各个页面对接"}},[s._v("#")]),s._v(" 2.1微前端嵌入APP的各个页面对接")]),s._v(" "),a("p",[a("strong",[s._v("微前端互联网诊疗各功能模块首页路由：")]),a("br"),s._v("\n互联网诊疗：/doctor/onlineConsult"),a("br"),s._v("\n排班设置：/doctor/schedulingSet"),a("br"),s._v("\n服务设置：/doctor/serviceType")]),s._v(" "),a("p",[a("strong",[s._v("使用方式：")]),a("br"),s._v('\nbaseUrl/#/{功能模块首页路由}? sparamstr={"accessToken":"", "source":""}'),a("br"),s._v(" "),a("strong",[s._v("入参说明：")]),a("br"),s._v("\naccessToken：登录的token"),a("br"),s._v("\nsource：来源")]),s._v(" "),a("p",[a("strong",[s._v("例子：")]),s._v(" "),a("code",[s._v('http://jkt.bsoft.com.cn/hc-online-consult-mobile-dist/#/doctor/onlineConsult/index?sparamstr={"accessToken":"04fad557-933e-4563-abd0-ae65d88efabb", "source":"2"}')])]),s._v(" "),a("h4",{attrs:{id:"_2-2-im聊天"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-im聊天"}},[s._v("#")]),s._v(" 2.2 IM聊天")]),s._v(" "),a("p",[s._v("同患者端类似")]),s._v(" "),a("p",[a("em",[s._v("后续还在更新中...")])]),s._v(" "),a("p",[s._v("参考资料：\nhttps://jkt.bsoft.com.cn/h5-document/document/js-native.html\nhttp://jkcs.bsoft.com.cn/learning/h5/JSNative-iOS.git\nhttp://jkcs.bsoft.com.cn/hc/app/ios/pods/NHCorePayService.git")]),s._v(" "),a("h1",{attrs:{id:"四、微服务-互联网诊疗-ios-对接文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、微服务-互联网诊疗-ios-对接文档"}},[s._v("#")]),s._v(" 四、微服务-互联网诊疗-iOS 对接文档")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("修订日期")]),s._v(" "),a("th",[s._v("修订版本")]),s._v(" "),a("th",[s._v("修订人")]),s._v(" "),a("th",[s._v("修订内容")]),s._v(" "),a("th",[s._v("备注")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("2021-06-04")]),s._v(" "),a("td",[s._v("0.1")]),s._v(" "),a("td",[s._v("岳昌锋")]),s._v(" "),a("td"),s._v(" "),a("td")])])]),s._v(" "),a("h3",{attrs:{id:"简单介绍-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单介绍-2"}},[s._v("#")]),s._v(" 简单介绍")]),s._v(" "),a("p",[s._v("    微服务互联网诊功能是使用H5页面实现的，并供其他端嵌入使用；因此APP对接时，需要创建带有WKWebView类功能的页面；")]),s._v(" "),a("p",[s._v("    互联网诊疗存在支付和IM的聊天功能，APP对接时这些功能是原生自己实现的；因此这里需要微服务与原生存在交互。")]),s._v(" "),a("p",[s._v("    私有库 NHAppCommon的NHBaseWKWebViewController类；已经具有基本的交互功能；我们可以继承NHBaseWKWebViewController进行创建页面。项目中也有基于项目业务封装的并继承NHBaseWKWebViewController的基类；建议使用该基类进行创建页面。")]),s._v(" "),a("h3",{attrs:{id:"_1-健康通居民端-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-健康通居民端-2"}},[s._v("#")]),s._v(" 1.健康通居民端")]),s._v(" "),a("p",[s._v("HCPBaseWKWebViewController就是我们基于健康通业务封装的基类；建议使用HCPBaseWKWebViewController进行创建页面。")]),s._v(" "),a("h4",{attrs:{id:"_1-1微前端嵌入app的各个页面对接-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1微前端嵌入app的各个页面对接-2"}},[s._v("#")]),s._v(" 1.1微前端嵌入APP的各个页面对接")]),s._v(" "),a("p",[a("strong",[s._v("微前端互联网诊疗各功能模块首页路由：")]),a("br"),s._v("\n首页: /resident/index?"),a("br"),s._v("\n在线问诊：/resident/onlineConsult"),a("br"),s._v("\n复诊配药：/resident/visitDispensing"),a("br"),s._v("\n候诊间：/resident/cloudWaitingVisit"),a("br"),s._v("\n云支付: /resident/cloudPayment"),a("br"),s._v("\n我的问诊：/resident/consultRecord"),a("br"),s._v("\n药品订单：/resident/drugOrders")]),s._v(" "),a("p",[a("strong",[s._v("使用方式：")]),a("br"),s._v('\nbaseUrl/#/{功能模块首页路由}? sparamstr={"accessToken":"", "source":""}'),a("br"),s._v(" "),a("strong",[s._v("入参说明：")]),a("br"),s._v("\naccessToken:登录的token"),a("br"),s._v("\nsource：来源")]),s._v(" "),a("p",[a("strong",[s._v("例子：")]),s._v(" "),a("code",[s._v('http://jkt.bsoft.com.cn/hc-online-consult-mobile-dist/#/resident/index?sparamstr={"accessToken":"04fad557-933e-4563-abd0-ae65d88efabb", "source":"2"}')])]),s._v(" "),a("h4",{attrs:{id:"_1-2-支付-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-支付-2"}},[s._v("#")]),s._v(" 1.2 支付")]),s._v(" "),a("p",[s._v("JS-Native 支付交互方法名：consultPay；")]),s._v(" "),a("p",[a("strong",[s._v("使用说明：")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 添加支付的交互")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bridge registerHandler"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"consultPay"')]),s._v(" handler"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id data WVJBResponseCallback responseCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n这里是 app进行支付的操作；\ndata ：是微服务出给app的数据；\nresponseCallback：是app支付结果传给微服务的回调；\n*/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("strong",[s._v("支付具体说明：")]),a("br"),s._v("\n1.导入支付头文件"),a("br"),s._v(" "),a("code",[s._v("#import <NHCorePayService/NHCorePayService.h>")])]),s._v(" "),a("p",[s._v("2.添加支付代理"),a("br"),s._v(" "),a("code",[s._v("[[NHCorePayService shareService] setCorePayServiceDelegate:self];")])]),s._v(" "),a("p",[s._v("3.根据具体需求进行支付")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// 直接调用支付方法 触发 支付宝 微信支付")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param type 1支付宝支付, 2微信支付")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param ConfigDict 所需配置参数 来自本地配置文件 AppScheme universalLink。。。。 等")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param payOrder 支付宝支付所需参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param payReq 微信支付所需参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param result 返回结果")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("toDirectPaymentWithType"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSInteger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("type\n                         config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSDictionary "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("configDict\n                       payOrder"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("payOrder\n                         payReq"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSDictionary "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("payReqDict\n                      payResult"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSInteger type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" int statusCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * h5调用支付\n *\n * @param config 配置\n * @param body body\n * @param userInfo userInfo\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("toPayWithConfigVC"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UIViewController "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("sourceVC\n               orderModel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NHCpPaymentOrderModel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("modelOrder\n                appScheme"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("appScheme\n               payResult"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("resultCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 支付\n *\n * @param config 配置\n * @param body body\n * @param userInfo userInfo\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("toPayWithConfig"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NHCpCorePayConfigModel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("config\n                   body"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NHCpCorePayBaseBody "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("body\n               userInfo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NHCpPaymentOrderModel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("modelOrder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("userInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br")])]),a("p",[s._v("4.支付代理处理，并将结果返回给微服务")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n 支付成功\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("toCorePaySuccess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n 支付失败\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("toCorePayFailure"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n 支付取消\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("toCorePayCancel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h4",{attrs:{id:"_1-3-im聊天-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-im聊天-2"}},[s._v("#")]),s._v(" 1.3 IM聊天")]),s._v(" "),a("p",[s._v("JS-Native 进入IM聊天交互方法名：jumpToIMChartVC；")]),s._v(" "),a("p",[a("strong",[s._v("使用说明：")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 添加支付的交互")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bridge registerHandler"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jumpToIMChartVC"')]),s._v(" handler"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id data WVJBResponseCallback responseCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n这里是 app IM聊天的操作；\ndata ：是微服务出给app的数据；\nresponseCallback：是app传给微服务的回调；\n*/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("strong",[s._v("IM聊天具体说明：")]),s._v("\n1.添加环信sdk")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v(" # 环信"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SDK")]),s._v("\n pod "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HyphenateLite'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("2.导入在线问诊的头文件"),a("br"),s._v(" "),a("code",[s._v('#import "HCOnlineConsultationService.h"')])]),s._v(" "),a("p",[s._v("3.进入问诊详情")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// 进入 问诊详情（待支付、已关闭）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param sourceVC 源视图控制器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param consultId 问诊记录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param hidesBottomBarWhenPushed 是否隐藏底部条")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("toOnlineConsultationRecordDetailVCWithSourceVC"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UIViewController "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("sourceVC\n                                             consultId"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("consultId\n                                         consultStatus"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("consultStatus\n                                           consultType"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("consultType\n                              hidesBottomBarWhenPushed"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BOOL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("hidesBottomBarWhenPushed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("4.问诊进行中处理")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// 根据问诊记录ID获取聊天ID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param consultId 问诊记录ID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param result 聊天ID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("getChatGroupModelWithconsultId"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("consultId result"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NHIMSChatGroupModel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("chatGroupModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// 跳转到聊天页面")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param sourceVC 源视图控制器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param conversationChatter 会话对方的用户名. 如果是群聊, 则是群组的id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param conversationType 会话类型")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/// @param consultId 问诊id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("toMessageVCWithSourceVC"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UIViewController "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("sourceVC\n            conversationChatter"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("conversationChatter\n            chatGroupModel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NHIMSChatGroupModel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("chatGroupModel conversationType"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("EMConversationType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("conversationType\n                      consultId"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("consultId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"_2-健康通医生端-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-健康通医生端-2"}},[s._v("#")]),s._v(" 2.健康通医生端")]),s._v(" "),a("h4",{attrs:{id:"_2-1微前端嵌入app的各个页面对接-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1微前端嵌入app的各个页面对接-2"}},[s._v("#")]),s._v(" 2.1微前端嵌入APP的各个页面对接")]),s._v(" "),a("p",[a("strong",[s._v("微前端互联网诊疗各功能模块首页路由：")]),a("br"),s._v("\n互联网诊疗：/doctor/onlineConsult"),a("br"),s._v("\n排班设置：/doctor/schedulingSet"),a("br"),s._v("\n服务设置：/doctor/serviceType")]),s._v(" "),a("p",[a("strong",[s._v("使用方式：")]),a("br"),s._v('\nbaseUrl/#/{功能模块首页路由}? sparamstr={"accessToken":"", "source":""}'),a("br"),s._v(" "),a("strong",[s._v("入参说明：")]),a("br"),s._v("\naccessToken：登录的token"),a("br"),s._v("\nsource：来源")]),s._v(" "),a("p",[a("strong",[s._v("例子：")]),s._v(" "),a("code",[s._v('http://jkt.bsoft.com.cn/hc-online-consult-mobile-dist/#/doctor/onlineConsult/index?sparamstr={"accessToken":"04fad557-933e-4563-abd0-ae65d88efabb", "source":"2"}')])]),s._v(" "),a("h4",{attrs:{id:"_2-2-im聊天-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-im聊天-2"}},[s._v("#")]),s._v(" 2.2 IM聊天")]),s._v(" "),a("p",[s._v("同患者端类似")]),s._v(" "),a("p",[a("em",[s._v("后续还在更新中...")])]),s._v(" "),a("p",[s._v("参考资料：\nhttps://jkt.bsoft.com.cn/h5-document/document/js-native.html\nhttp://jkcs.bsoft.com.cn/learning/h5/JSNative-iOS.git\nhttp://jkcs.bsoft.com.cn/hc/app/ios/pods/NHCorePayService.git")])])}),[],!1,null,null,null);t.default=e.exports}}]);