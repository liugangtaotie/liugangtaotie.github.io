(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{516:function(t,e,a){t.exports=a.p+"assets/img/npm08.a98988ff.png"},517:function(t,e,a){t.exports=a.p+"assets/img/npm07.f4d0c1d3.png"},518:function(t,e,a){t.exports=a.p+"assets/img/npm01.d53b71ad.png"},519:function(t,e,a){t.exports=a.p+"assets/img/npm02.4510f3ff.png"},520:function(t,e,a){t.exports=a.p+"assets/img/npm04.d11a5648.png"},521:function(t,e,a){t.exports=a.p+"assets/img/npm20.ba06c0c1.png"},522:function(t,e,a){t.exports=a.p+"assets/img/npm05.be5c6a30.png"},523:function(t,e,a){t.exports=a.p+"assets/img/npm03.0dc16826.png"},524:function(t,e,a){t.exports=a.p+"assets/img/npm09.7eaaf199.png"},525:function(t,e,a){t.exports=a.p+"assets/img/npm10.b3156675.png"},616:function(t,e,a){"use strict";a.r(e);var n=a(2),r=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("Boxx",{attrs:{changeTime:"5000"}}),t._v(" "),e("h2",{attrs:{id:"使用verdaccio搭建私有npm仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用verdaccio搭建私有npm仓库"}},[t._v("#")]),t._v(" 使用verdaccio搭建私有npm仓库")]),t._v(" "),e("h3",{attrs:{id:"当前npm-私有仓库有以下包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#当前npm-私有仓库有以下包"}},[t._v("#")]),t._v(" 当前npm 私有仓库有以下包：")]),t._v(" "),e("p",[e("a",{attrs:{href:"http://pri-npm.atag.common.com.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("私有仓库地址"),e("OutboundLink")],1)]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("包名")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("备注")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("@common/xx-common-element-web-code")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("基于webpack的单页面web app")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("版本v0.1.4")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("@common/xx-common-util")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("通用js工具类")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("版本v1.2.3")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("@common/xx-js-to-native")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("js与native通信")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("版本v1.0.3")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("@common/xx-common-ui")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("基于uView UI,适配不同终端的解决方案")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("版本v1.0.8")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("@common/xx-common-ui-next")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("基于uView UI,适配不同终端的解决方案(vue3.x)")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("版本v1.0.4")])])])]),t._v(" "),e("h2",{attrs:{id:"一、为何选择"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、为何选择"}},[t._v("#")]),t._v(" 一、为何选择")]),t._v(" "),e("p",[t._v("选择背景：")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("1.使用cnpmjs.org,这个要搭建数据库，较麻烦。")])]),t._v(" "),e("li",[e("p",[t._v("2.Sinopia多年未更新，Verdaccio是基于Sinopia重构的，注入了更多活力")])]),t._v(" "),e("li",[e("p",[t._v("3.Verdaccio是一个零配置的私有的带缓存功能的npm包管理工具")])])]),t._v(" "),e("p",[t._v("这里简单使用"),e("a",{attrs:{href:"https://github.com/verdaccio/verdaccio",target:"_blank",rel:"noopener noreferrer"}},[t._v("verdaccio"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("h2",{attrs:{id:"二、工作原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、工作原理"}},[t._v("#")]),t._v(" 二、工作原理")]),t._v(" "),e("p",[e("img",{attrs:{src:a(516),alt:"Image text"}})]),t._v(" "),e("h2",{attrs:{id:"三、安装流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、安装流程"}},[t._v("#")]),t._v(" 三、安装流程")]),t._v(" "),e("p",[e("img",{attrs:{src:a(517),alt:"Image text"}})]),t._v(" "),e("h2",{attrs:{id:"四、环境搭建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、环境搭建"}},[t._v("#")]),t._v(" 四、环境搭建")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("node "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" npm "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" verdaccio "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" pm2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" nrm\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("1.安装：npm install -g verdaccio")]),t._v(" "),e("p",[t._v("2.verdaccio配置：\n全局安装verdaccio的目录在node下面，/lib/node_modules/verdaccio,我们要修改的配置在~/.config/verdaccio/config.yaml,这个文件其实是复制刚才的全局安装下的config文件夹下的default.yaml的。")]),t._v(" "),e("p",[t._v("3.启动verdaccio：")]),t._v(" "),e("p",[t._v("4.浏览器打开: (http://localhost:4873/)")]),t._v(" "),e("ul",[e("li",[t._v("可借助工具pm2来进行管理")])]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("npm install "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g pm2 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pm2安装")]),t._v("\npm2 start which verdaccio "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动verdaccio")]),t._v("\npm2 stop which verdaccio "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 停止服务")]),t._v("\npm2 show verdaccio "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查看verdaccio进程实时日志")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("5.nrm管理镜像：")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("npm install "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g nrm  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 安装nrm")]),t._v("\nnrm ls  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查看镜像列表")]),t._v("\nnrm add xxx "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your address"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加账号")]),t._v("\nnpm adduser "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("registry http"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxxxx "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册账号")]),t._v("\nnrm use xxx      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  使用npm源")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("h2",{attrs:{id:"五、有何价值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、有何价值"}},[t._v("#")]),t._v(" 五、有何价值")]),t._v(" "),e("ul",[e("li",[t._v("1.安全性角度考虑:如果我们想要一个公共组件库，那么把组件放到我们私有库中，只有内网可以访问，这样可以避免组件中业务的泄露；")]),t._v(" "),e("li",[t._v("2.模块复用性角度考虑：多个项目之间有重复的共有模块，当需要修改模块，通过简单的统一的配置就可以实现；提炼后的组件有专门的地址可以用来查看，方便使用，在后期项目的引用中也能节约开发成本")]),t._v(" "),e("li",[t._v("3.npm包下载速度角度考虑：使用内部的地址，能够在开发下载node包的同时，将关联的依赖包缓存到verdaccio服务器中，下载速度更快；")]),t._v(" "),e("li",[t._v("4.项目开发中的路径角度考虑：在项目开发中书写代码更整洁简练，不需书写更长的相对路径；")]),t._v(" "),e("li",[t._v("5.公司技术沉淀角度考虑：知识的沉淀，在公司业务相关的应用上尤佳；")]),t._v(" "),e("li",[t._v("6.版本角度的考虑：相当于一个容器，统一管理需要的包，保持版本的唯一；")]),t._v(" "),e("li",[t._v("7.开发效率角度考虑：使私有公共业务或组件模块能以共有包一样的管理组织方式，保持一致性，提高开发效率；")])]),t._v(" "),e("h2",{attrs:{id:"六、使用规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、使用规则"}},[t._v("#")]),t._v(" 六、使用规则")]),t._v(" "),e("ul",[e("li",[t._v("1.在git上新建一个私有仓库组common-xx，本质是为了避免和外来node包冲突")]),t._v(" "),e("li",[t._v("2.然后再在common-xx中新建私有项目，比如xx-common-element-web-code")]),t._v(" "),e("li",[t._v("3.版本问题【尽可能兼容低版本，未兼容部分，需要告知为什么不能实现】")]),t._v(" "),e("li",[t._v("4.限制发布者权限、对common-xx中的项目进行命名审核，以及更新迭代代码的审核")]),t._v(" "),e("li",[t._v("5.所有的发布私有包，必须走git流程，不能私底下违规发布")]),t._v(" "),e("li",[t._v("6.还在完善中……")])]),t._v(" "),e("h2",{attrs:{id:"七、实战截图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七、实战截图"}},[t._v("#")]),t._v(" 七、实战截图")]),t._v(" "),e("ul",[e("li",[t._v("1、git上面的地址---xxx-通用（element ui）-底层架构: "),e("a",{attrs:{href:"https://jkcs.common.com.cn/xx-standard-repo/fore-end/xx-common-element-web-code",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitlab - 源码"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("如下图：\n"),e("img",{attrs:{src:a(518),alt:"Image text"}})]),t._v(" "),e("ul",[e("li",[t._v("2、git clone 上面的git地址，并进行utils私有库项目的开发")])]),t._v(" "),e("p",[t._v("如下图：\n"),e("img",{attrs:{src:a(519),alt:"Image text"}})]),t._v(" "),e("ul",[e("li",[t._v("3、npm publish")])]),t._v(" "),e("p",[t._v("如下图：\n"),e("img",{attrs:{src:a(520),alt:"Image text"}})]),t._v(" "),e("ul",[e("li",[t._v("4、npm unpublish xxx --force (切记：不要顺便删除线上的包)")])]),t._v(" "),e("p",[t._v("如下图：\n"),e("img",{attrs:{src:a(521),alt:"Image text"}})]),t._v(" "),e("ul",[e("li",[t._v("5、站点展示")])]),t._v(" "),e("p",[t._v("如下图：\n"),e("img",{attrs:{src:a(522),alt:"Image text"}})]),t._v(" "),e("ul",[e("li",[t._v("6、食用：npm i common-xx")])]),t._v(" "),e("p",[t._v("如下图：\n"),e("img",{attrs:{src:a(523),alt:"Image text"}})]),t._v(" "),e("ul",[e("li",[t._v("7、storage 放在那里的？")])]),t._v(" "),e("p",[t._v("1)、命令行中输入：verdaccio ，\n"),e("img",{attrs:{src:a(524),alt:"Image text"}}),t._v("\n2)、找到config file  中/Users/sweet/.config/verdaccio/config.yaml")]),t._v(" "),e("p",[t._v("3)、vim 打开 config.yaml, 部署的文件放在：'/Users/sweet/.local/share/verdaccio/storage'\n"),e("img",{attrs:{src:a(525),alt:"Image text"}})]),t._v(" "),e("h2",{attrs:{id:"推荐的官方文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#推荐的官方文档"}},[t._v("#")]),t._v(" 推荐的官方文档")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.jianshu.com/p/70741a7dd587",target:"_blank",rel:"noopener noreferrer"}},[t._v("verdaccio搭建npm简单实践"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.jianshu.com/p/16b0a2f124fb",target:"_blank",rel:"noopener noreferrer"}},[t._v("基于verdaccio的npm私有仓库搭建和使用总结"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.im/post/6844903742161027085",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm私有库服务搭建及规范定制"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.im/post/6844903833819152391",target:"_blank",rel:"noopener noreferrer"}},[t._v("Verdaccio 搭建私有 NPM"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.im/post/6844903961346965517",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用verdaccio搭建私有npm"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.cn/post/7000271682778693645",target:"_blank",rel:"noopener noreferrer"}},[t._v("炒菜式手把手教学：基本的memorepo项目npm发包流程"),e("OutboundLink")],1)])],1)}),[],!1,null,null,null);e.default=r.exports}}]);